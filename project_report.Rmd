---
title: "Prediction of Exercise Manner Using Accelerometer Data"
author: "Fatlum Dili"
date: "`r Sys.Date()`"
output: html_document
---

# Introduction

This project aims to predict how participants performed weight lifting exercises, classified by the variable `classe` in the training data set. Data were collected from accelerometers worn on different body parts. The goal is to build a predictive model with low out-of-sample error.

# Data Loading and Cleaning

```{r setup, message=FALSE, warning=FALSE}
library(caret)
library(randomForest)

# Load data
train_url <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-training.csv"
test_url  <- "https://d396qusza40orc.cloudfront.net/predmachlearn/pml-testing.csv"

training <- read.csv(train_url, na.strings = c("NA", "", "#DIV/0!"))
testing  <- read.csv(test_url, na.strings = c("NA", "", "#DIV/0!"))

# Remove near zero variance predictors
nzv <- nearZeroVar(training)
training <- training[, -nzv]

# Remove columns with >50% NAs
na_cols <- sapply(training, function(x) mean(is.na(x))) > 0.5
training <- training[, !na_cols]

# Remove irrelevant columns
irrelevant_cols <- c("X", "user_name", "raw_timestamp_part_1", "raw_timestamp_part_2",
                     "cvtd_timestamp", "new_window", "num_window")
training <- training[, !(names(training) %in% irrelevant_cols)]

# Align test data columns
testing <- testing[, names(training)[names(training) != "classe"]]
